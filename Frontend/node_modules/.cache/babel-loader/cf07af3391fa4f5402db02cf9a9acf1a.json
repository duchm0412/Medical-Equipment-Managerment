{"ast":null,"code":"import _regeneratorRuntime from \"E:\\\\\\u0110\\u1ED3 \\xE1n web\\\\Project Web \\u0110\\u1ED3 \\xC1n b\\u1EA3n cu\\u1ED1i\\\\codeguidi\\\\codeguidi\\\\Frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";\nimport _asyncToGenerator from \"E:\\\\\\u0110\\u1ED3 \\xE1n web\\\\Project Web \\u0110\\u1ED3 \\xC1n b\\u1EA3n cu\\u1ED1i\\\\codeguidi\\\\codeguidi\\\\Frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"E:\\\\\\u0110\\u1ED3 \\xE1n web\\\\Project Web \\u0110\\u1ED3 \\xC1n b\\u1EA3n cu\\u1ED1i\\\\codeguidi\\\\codeguidi\\\\Frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"E:\\\\\\u0110\\u1ED3 \\xE1n web\\\\Project Web \\u0110\\u1ED3 \\xC1n b\\u1EA3n cu\\u1ED1i\\\\codeguidi\\\\codeguidi\\\\Frontend\\\\src\\\\pages\\\\departmentManager\\\\departmentModalDetail.js\";\n\nimport React from \"react\";\nimport { toastr } from \"react-redux-toastr\";\nimport EquipmentApi from \"../../api/EquipmentApi\";\nimport { Button } from \"reactstrap\";\nimport StaffApi from \"../../api/StaffApi\";\nimport Table from \"reactstrap/lib/Table\";\nimport InventoryApi from \"../../api/InventoryApi\";\n\nvar DetailDepartmentModal = function DetailDepartmentModal(props) {\n  var _React$useState = React.useState([]),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      staffs = _React$useState2[0],\n      setstaffs = _React$useState2[1];\n\n  var _React$useState3 = React.useState([]),\n      _React$useState4 = _slicedToArray(_React$useState3, 2),\n      equipment = _React$useState4[0],\n      setequipment = _React$useState4[1];\n\n  var showSuccessNotification = function showSuccessNotification(title, message) {\n    var options = {\n      timeOut: 2500,\n      showCloseButton: false,\n      progressBar: false,\n      position: \"top-right\"\n    };\n    toastr.success(title, message, options);\n  };\n\n  React.useEffect(function () {\n    var getEmployeeOfDepartment = /*#__PURE__*/function () {\n      var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n        var id, result, equipt, staff, getStaff, equipments, getEquipments;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                id = sessionStorage.getItem(\"departmentIdToGetDetail\");\n                _context.next = 3;\n                return StaffApi.findStaffByDepartmentId(\"\".concat(id));\n\n              case 3:\n                result = _context.sent;\n                _context.next = 6;\n                return EquipmentApi.getOnlyDpIDEquipID(\"\".concat(id));\n\n              case 6:\n                equipt = _context.sent;\n                staff = result.content; ///\n\n                getStaff = staff.map(function (d) {\n                  return {\n                    fullName: \"\".concat(d.fullName),\n                    phone: \"\".concat(d.phone),\n                    role: \"\".concat(d.role)\n                  };\n                });\n                setstaffs(getStaff); ///\n\n                equipments = equipt;\n                getEquipments = equipments.map(function (d) {\n                  return {\n                    equipId: \"\".concat(d.equipmentId),\n                    equipName: \"\".concat(d.equipmentName),\n                    equipmentStatus: \"\".concat(d.equipmentStatus),\n                    departmentId: \"\".concat(d.departmentId),\n                    classify: \"\".concat(d.classify),\n                    description: \"\".concat(d.description),\n                    brand: \"\".concat(d.brand),\n                    staffName: \"\".concat(d.staffName),\n                    insurance: \"\".concat(d.insurance),\n                    quantity: \"\".concat(d.quantity),\n                    unitPrice: \"\".concat(d.unitPrice)\n                  };\n                });\n                setequipment(getEquipments);\n\n              case 13:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      return function getEmployeeOfDepartment() {\n        return _ref.apply(this, arguments);\n      };\n    }();\n\n    getEmployeeOfDepartment();\n  }, []);\n  var dataTableStaff = staffs.map(function (item, index) {\n    return /*#__PURE__*/React.createElement(\"tbody\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"tr\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"td\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 11\n      }\n    }, item.fullName), /*#__PURE__*/React.createElement(\"td\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 11\n      }\n    }, item.phone), /*#__PURE__*/React.createElement(\"td\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 11\n      }\n    }, item.role)));\n  });\n\n  var handlePay = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(equipmentId, departmentId, equipName, equipmentStatus, classify, description, brand, staffName, insurance, quantity, unitPrice) {\n      var result, quantity0;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              console.log(equipmentId + \" \" + departmentId);\n              _context2.prev = 1;\n              _context2.next = 4;\n              return EquipmentApi.deleteInEquipOfDpById(equipmentId, departmentId);\n\n            case 4:\n              _context2.next = 6;\n              return InventoryApi.existsByEquipmentId(equipmentId);\n\n            case 6:\n              result = _context2.sent;\n              console.log(result);\n\n              if (!(result == [])) {\n                _context2.next = 20;\n                break;\n              }\n\n              quantity0 = 1;\n              _context2.prev = 10;\n              _context2.next = 13;\n              return InventoryApi.create(equipmentId, equipName, classify, description, brand, staffName, insurance, unitPrice, quantity0);\n\n            case 13:\n              _context2.next = 18;\n              break;\n\n            case 15:\n              _context2.prev = 15;\n              _context2.t0 = _context2[\"catch\"](10);\n              console.log(_context2.t0);\n\n            case 18:\n              _context2.next = 29;\n              break;\n\n            case 20:\n              if (!(result != null)) {\n                _context2.next = 29;\n                break;\n              }\n\n              _context2.prev = 21;\n              _context2.next = 24;\n              return InventoryApi.setQuantity(result.equipmentId, result.quantity + 1);\n\n            case 24:\n              _context2.next = 29;\n              break;\n\n            case 26:\n              _context2.prev = 26;\n              _context2.t1 = _context2[\"catch\"](21);\n              console.log(_context2.t1);\n\n            case 29:\n              ////////////////\n              showSuccessNotification(\"Trả máy\", \">>> Thành công !\");\n              window.location.reload();\n              _context2.next = 36;\n              break;\n\n            case 33:\n              _context2.prev = 33;\n              _context2.t2 = _context2[\"catch\"](1);\n              console.log(_context2.t2);\n\n            case 36:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2, null, [[1, 33], [10, 15], [21, 26]]);\n    }));\n\n    return function handlePay(_x, _x2, _x3, _x4, _x5, _x6, _x7, _x8, _x9, _x10, _x11) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  var dataTableEquip = equipment.map(function (item, index) {\n    return /*#__PURE__*/React.createElement(\"tbody\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"tr\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"td\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 11\n      }\n    }, item.equipId), /*#__PURE__*/React.createElement(\"td\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 11\n      }\n    }, item.equipName), /*#__PURE__*/React.createElement(\"td\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 11\n      }\n    }, item.equipmentStatus), /*#__PURE__*/React.createElement(\"td\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      color: \"warning\",\n      onClick: function onClick() {\n        return handlePay(item.equipId, item.departmentId, item.equipName, item.equipmentStatus, item.classify, item.description, item.brand, item.staffName, item.insurance, item.quantity, item.unitPrice);\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 13\n      }\n    }, \"Tr\\u1EA3 m\\xE1y\"))));\n  });\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"text-center\",\n    style: {\n      marginTop: \"50px\"\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    color: \"danger\",\n    size: \"lg\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 9\n    }\n  }, \"Chi ti\\u1EBFt ph\\xF2ng ban\")), /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      height: \"400px\",\n      padding: \"50px\"\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"b\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 9\n    }\n  }, \"Nh\\xE2n vi\\xEAn : \"), /*#__PURE__*/React.createElement(Table, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"thead\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"tr\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"th\", {\n    style: {\n      width: \"25%\"\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 15\n    }\n  }, \"T\\xEAn nh\\xE2n vi\\xEAn\"), /*#__PURE__*/React.createElement(\"th\", {\n    style: {\n      width: \"25%\"\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 15\n    }\n  }, \"S\\u1ED1 \\u0111i\\u1EC7n tho\\u1EA1i\"), /*#__PURE__*/React.createElement(\"th\", {\n    style: {\n      width: \"25%\"\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 15\n    }\n  }, \"Ch\\u1EE9c v\\u1EE5\"))), dataTableStaff), /*#__PURE__*/React.createElement(\"br\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 171,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"b\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 9\n    }\n  }, \"Thi\\u1EBFt b\\u1ECB :\"), /*#__PURE__*/React.createElement(Table, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 173,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"thead\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 174,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"tr\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 175,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"th\", {\n    style: {\n      width: \"20%\"\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 176,\n      columnNumber: 15\n    }\n  }, \"M\\xE3 thi\\u1EBFt b\\u1ECB \"), /*#__PURE__*/React.createElement(\"th\", {\n    style: {\n      width: \"40%\"\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 15\n    }\n  }, \"T\\xEAn thi\\u1EBFt b\\u1ECB\"), /*#__PURE__*/React.createElement(\"th\", {\n    style: {\n      width: \"20%\"\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 178,\n      columnNumber: 15\n    }\n  }, \"Tr\\u1EA1ng th\\xE1i\"), /*#__PURE__*/React.createElement(\"th\", {\n    style: {\n      width: \"25%\"\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 179,\n      columnNumber: 15\n    }\n  }, \"Tr\\u1EA3 thi\\u1EBFt b\\u1ECB\"))), dataTableEquip), /*#__PURE__*/React.createElement(\"br\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 185,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      float: \"right\"\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 187,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    color: \"primary\",\n    size: \"sm\",\n    onClick: props.closeModal,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 188,\n      columnNumber: 11\n    }\n  }, \"\\u0110\\xF3ng\"))));\n};\n\nexport default DetailDepartmentModal;","map":{"version":3,"sources":["E:/Đồ án web/Project Web Đồ Án bản cuối/codeguidi/codeguidi/Frontend/src/pages/departmentManager/departmentModalDetail.js"],"names":["React","toastr","EquipmentApi","Button","StaffApi","Table","InventoryApi","DetailDepartmentModal","props","useState","staffs","setstaffs","equipment","setequipment","showSuccessNotification","title","message","options","timeOut","showCloseButton","progressBar","position","success","useEffect","getEmployeeOfDepartment","id","sessionStorage","getItem","findStaffByDepartmentId","result","getOnlyDpIDEquipID","equipt","staff","content","getStaff","map","d","fullName","phone","role","equipments","getEquipments","equipId","equipmentId","equipName","equipmentName","equipmentStatus","departmentId","classify","description","brand","staffName","insurance","quantity","unitPrice","dataTableStaff","item","index","handlePay","console","log","deleteInEquipOfDpById","existsByEquipmentId","quantity0","create","setQuantity","window","location","reload","dataTableEquip","marginTop","height","padding","width","float","closeModal"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport { toastr } from \"react-redux-toastr\";\r\nimport EquipmentApi from \"../../api/EquipmentApi\";\r\nimport { Button } from \"reactstrap\";\r\nimport StaffApi from \"../../api/StaffApi\";\r\nimport Table from \"reactstrap/lib/Table\";\r\nimport InventoryApi from \"../../api/InventoryApi\";\r\n\r\nconst DetailDepartmentModal = (props) => {\r\n  const [staffs, setstaffs] = React.useState([]);\r\n  const [equipment, setequipment] = React.useState([]);\r\n  const showSuccessNotification = (title, message) => {\r\n    const options = {\r\n      timeOut: 2500,\r\n      showCloseButton: false,\r\n      progressBar: false,\r\n      position: \"top-right\",\r\n    };\r\n    toastr.success(title, message, options);\r\n  };\r\n  React.useEffect(() => {\r\n    const getEmployeeOfDepartment = async () => {\r\n      const id = sessionStorage.getItem(\"departmentIdToGetDetail\");\r\n      const result = await StaffApi.findStaffByDepartmentId(`${id}`);\r\n      const equipt = await EquipmentApi.getOnlyDpIDEquipID(`${id}`);\r\n      const staff = result.content;\r\n      ///\r\n      const getStaff = staff.map((d) => ({\r\n        fullName: `${d.fullName}`,\r\n        phone: `${d.phone}`,\r\n        role: `${d.role}`,\r\n      }));\r\n      setstaffs(getStaff);\r\n      ///\r\n      const equipments = equipt;\r\n      const getEquipments = equipments.map((d) => ({\r\n        equipId: `${d.equipmentId}`,\r\n        equipName: `${d.equipmentName}`,\r\n        equipmentStatus: `${d.equipmentStatus}`,\r\n        departmentId: `${d.departmentId}`,\r\n        classify: `${d.classify}`,\r\n        description: `${d.description}`,\r\n        brand: `${d.brand}`,\r\n        staffName: `${d.staffName}`,\r\n        insurance: `${d.insurance}`,\r\n        quantity: `${d.quantity}`,\r\n        unitPrice: `${d.unitPrice}`,\r\n      }));\r\n      setequipment(getEquipments);\r\n    };\r\n    getEmployeeOfDepartment();\r\n  }, []);\r\n\r\n  const dataTableStaff = staffs.map((item, index) => {\r\n    return (\r\n      <tbody>\r\n        <tr>\r\n          <td>{item.fullName}</td>\r\n          <td>{item.phone}</td>\r\n          <td>{item.role}</td>\r\n        </tr>\r\n      </tbody>\r\n    );\r\n  });\r\n\r\n  const handlePay = async (\r\n    equipmentId,\r\n    departmentId,\r\n    equipName,\r\n    equipmentStatus,\r\n    classify,\r\n    description,\r\n    brand,\r\n    staffName,\r\n    insurance,\r\n    quantity,\r\n    unitPrice\r\n  ) => {\r\n    console.log(equipmentId + \" \" + departmentId);\r\n    try {\r\n      await EquipmentApi.deleteInEquipOfDpById(equipmentId, departmentId);\r\n      //////////////\r\n      const result = await InventoryApi.existsByEquipmentId(equipmentId);\r\n      console.log(result);\r\n      if (result == []) {\r\n        const quantity0 = 1;\r\n        try {\r\n          await InventoryApi.create(\r\n            equipmentId,\r\n            equipName,\r\n            classify,\r\n            description,\r\n            brand,\r\n            staffName,\r\n            insurance,\r\n            unitPrice,\r\n            quantity0\r\n          );\r\n        } catch (error) {\r\n          console.log(error);\r\n        }\r\n      } else if (result != null)\r\n        try {\r\n          await InventoryApi.setQuantity(\r\n            result.equipmentId,\r\n            result.quantity + 1\r\n          );\r\n        } catch (error) {\r\n          console.log(error);\r\n        }\r\n      ////////////////\r\n      showSuccessNotification(\"Trả máy\", \">>> Thành công !\");\r\n      window.location.reload();\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  };\r\n\r\n  const dataTableEquip = equipment.map((item, index) => {\r\n    return (\r\n      <tbody>\r\n        <tr>\r\n          <td>{item.equipId}</td>\r\n          <td>{item.equipName}</td>\r\n          <td>{item.equipmentStatus}</td>\r\n          <td>\r\n            <Button\r\n              color=\"warning\"\r\n              onClick={() =>\r\n                handlePay(\r\n                  item.equipId,\r\n                  item.departmentId,\r\n                  item.equipName,\r\n                  item.equipmentStatus,\r\n                  item.classify,\r\n                  item.description,\r\n                  item.brand,\r\n                  item.staffName,\r\n                  item.insurance,\r\n                  item.quantity,\r\n                  item.unitPrice\r\n                )\r\n              }\r\n            >\r\n              Trả máy\r\n            </Button>\r\n          </td>\r\n        </tr>\r\n      </tbody>\r\n    );\r\n  });\r\n  return (\r\n    <div>\r\n      <div className=\"text-center\" style={{ marginTop: \"50px\" }}>\r\n        <Button color=\"danger\" size=\"lg\">\r\n          Chi tiết phòng ban\r\n        </Button>\r\n      </div>\r\n      <div style={{ height: \"400px\", padding: \"50px\" }}>\r\n        <b>Nhân viên : </b>\r\n        <Table>\r\n          <thead>\r\n            <tr>\r\n              <th style={{ width: \"25%\" }}>Tên nhân viên</th>\r\n              <th style={{ width: \"25%\" }}>Số điện thoại</th>\r\n              <th style={{ width: \"25%\" }}>Chức vụ</th>\r\n            </tr>\r\n          </thead>\r\n          {dataTableStaff}\r\n        </Table>\r\n        <br></br>\r\n        <b>Thiết bị :</b>\r\n        <Table>\r\n          <thead>\r\n            <tr>\r\n              <th style={{ width: \"20%\" }}>Mã thiết bị </th>\r\n              <th style={{ width: \"40%\" }}>Tên thiết bị</th>\r\n              <th style={{ width: \"20%\" }}>Trạng thái</th>\r\n              <th style={{ width: \"25%\" }}>Trả thiết bị</th>\r\n            </tr>\r\n          </thead>\r\n          {dataTableEquip}\r\n        </Table>\r\n\r\n        <br></br>\r\n\r\n        <div style={{ float: \"right\" }}>\r\n          <Button color=\"primary\" size=\"sm\" onClick={props.closeModal}>\r\n            Đóng\r\n          </Button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\nexport default DetailDepartmentModal;\r\n"]},"metadata":{},"sourceType":"module"}