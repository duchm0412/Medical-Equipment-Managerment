{"ast":null,"code":"import _defineProperty from \"E:\\\\\\u0110\\u1ED3 \\xE1n web\\\\Project Web \\u0110\\u1ED3 \\xC1n b\\u1EA3n cu\\u1ED1i\\\\codeguidi\\\\codeguidi\\\\Frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";\nimport _regeneratorRuntime from \"E:\\\\\\u0110\\u1ED3 \\xE1n web\\\\Project Web \\u0110\\u1ED3 \\xC1n b\\u1EA3n cu\\u1ED1i\\\\codeguidi\\\\codeguidi\\\\Frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";\nimport _asyncToGenerator from \"E:\\\\\\u0110\\u1ED3 \\xE1n web\\\\Project Web \\u0110\\u1ED3 \\xC1n b\\u1EA3n cu\\u1ED1i\\\\codeguidi\\\\codeguidi\\\\Frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";\n\nvar _this = this,\n    _jsxFileName = \"E:\\\\\\u0110\\u1ED3 \\xE1n web\\\\Project Web \\u0110\\u1ED3 \\xC1n b\\u1EA3n cu\\u1ED1i\\\\codeguidi\\\\codeguidi\\\\Frontend\\\\src\\\\pages\\\\staffManager\\\\createdStaffForm.js\";\n\nimport React from \"react\";\nimport { Button, Card, CardBody, FormGroup } from \"reactstrap\";\nimport { Formik, FastField, Form, ErrorMessage } from \"formik\";\nimport * as Yup from \"yup\";\nimport { ReactstrapInput } from \"reactstrap-formik\";\nimport { toastr } from \"react-redux-toastr\";\nimport StaffApi from \"../../api/StaffApi\";\nimport DepartmentApi from \"../../api/DepartmentApi\";\n\nvar CreateStaffForm = function CreateStaffForm(props) {\n  var showSuccessNotification = function showSuccessNotification(title, message) {\n    var options = {\n      timeOut: 2500,\n      showCloseButton: false,\n      progressBar: false,\n      position: \"top-right\"\n    }; // show notification\n\n    toastr.success(title, message, options);\n  };\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Formik, {\n    initialValues: {\n      staffId: \"\",\n      fullName: \"\",\n      phone: \"\",\n      email: \"\",\n      departmentId: \"\",\n      role: \"\"\n    },\n    validationSchema: Yup.object({\n      staffId: Yup.string().max(10, \"Tối đa 10 ký tự\").required(\"Required\").test(\"checkUniquestaffId\", \"Mã nhân viên này đã tồn tại\", /*#__PURE__*/function () {\n        var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(staffId) {\n          var isExists;\n          return _regeneratorRuntime.wrap(function _callee$(_context) {\n            while (1) {\n              switch (_context.prev = _context.next) {\n                case 0:\n                  _context.next = 2;\n                  return StaffApi.findStaffByStaffId(staffId);\n\n                case 2:\n                  isExists = _context.sent;\n                  return _context.abrupt(\"return\", !isExists);\n\n                case 4:\n                case \"end\":\n                  return _context.stop();\n              }\n            }\n          }, _callee);\n        }));\n\n        return function (_x) {\n          return _ref.apply(this, arguments);\n        };\n      }()),\n      fullName: Yup.string().max(50, \"Tối đa 50 ký tự\").required(\"Required\"),\n      phone: Yup.string().max(11, \"Số điện thoại từ 10 đến 11 chữ số \").max(10, \"Số điện thoại từ 10 đến 11 chữ số\").required(\"Required\").test(\"checkUniquePhone\", \"Số điện thoại này đã tồn tại\", /*#__PURE__*/function () {\n        var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(phone) {\n          var isExists;\n          return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n            while (1) {\n              switch (_context2.prev = _context2.next) {\n                case 0:\n                  _context2.next = 2;\n                  return StaffApi.findStaffByStaffPhone(phone);\n\n                case 2:\n                  isExists = _context2.sent;\n                  return _context2.abrupt(\"return\", !isExists);\n\n                case 4:\n                case \"end\":\n                  return _context2.stop();\n              }\n            }\n          }, _callee2);\n        }));\n\n        return function (_x2) {\n          return _ref2.apply(this, arguments);\n        };\n      }()),\n      email: Yup.string().max(100, \"Tối đa 100 ký tự\").required(\"Required\").test(\"checkUniquePhone\", \"Email này đã được sử dụng\", /*#__PURE__*/function () {\n        var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(email) {\n          var isExists;\n          return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n            while (1) {\n              switch (_context3.prev = _context3.next) {\n                case 0:\n                  _context3.next = 2;\n                  return StaffApi.findStaffByEmail(email);\n\n                case 2:\n                  isExists = _context3.sent;\n                  return _context3.abrupt(\"return\", !isExists);\n\n                case 4:\n                case \"end\":\n                  return _context3.stop();\n              }\n            }\n          }, _callee3);\n        }));\n\n        return function (_x3) {\n          return _ref3.apply(this, arguments);\n        };\n      }()),\n      departmentId: Yup.string().max(10, \"Tối đa 10 ký tự\").required(\"Required\").test(\"checkUniquePhone\", \"Hiện không tồn tại phòng ban này\", /*#__PURE__*/function () {\n        var _ref4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4(departmentId) {\n          var isExists;\n          return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n            while (1) {\n              switch (_context4.prev = _context4.next) {\n                case 0:\n                  _context4.next = 2;\n                  return DepartmentApi.existsByDepartmentId(departmentId);\n\n                case 2:\n                  isExists = _context4.sent;\n                  return _context4.abrupt(\"return\", isExists);\n\n                case 4:\n                case \"end\":\n                  return _context4.stop();\n              }\n            }\n          }, _callee4);\n        }));\n\n        return function (_x4) {\n          return _ref4.apply(this, arguments);\n        };\n      }()),\n      role: Yup.string().max(10, \"Tối đa 10 ký tự\").required(\"Required\").test(\"checkformequipmentStatus\", \"Chỉ chấp nhận các trường: Admin hoặc Employee hoặc Manager \", function (role) {\n        if (role.match(\"Admin\") || role.match(\"Employee\") || role.match(\"Manager\")) {\n          return true;\n        }\n\n        return false;\n      })\n    }),\n    onSubmit: /*#__PURE__*/function () {\n      var _ref6 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee5(values, _ref5) {\n        var setFieldError;\n        return _regeneratorRuntime.wrap(function _callee5$(_context5) {\n          while (1) {\n            switch (_context5.prev = _context5.next) {\n              case 0:\n                setFieldError = _ref5.setFieldError;\n                _context5.prev = 1;\n                _context5.next = 4;\n                return StaffApi.create(values.staffId, values.fullName, values.phone, values.email, values.departmentId, values.role);\n\n              case 4:\n                showSuccessNotification(\"Tạo mới nhân viên\", \">>> Thành công\");\n                window.location.reload();\n                _context5.next = 12;\n                break;\n\n              case 8:\n                _context5.prev = 8;\n                _context5.t0 = _context5[\"catch\"](1);\n                setFieldError(\"errorForm\", \"Lỗi hệ thống, xin lỗi về sự bất tiện này\");\n                console.log(_context5.t0);\n\n              case 12:\n              case \"end\":\n                return _context5.stop();\n            }\n          }\n        }, _callee5, null, [[1, 8]]);\n      }));\n\n      return function (_x5, _x6) {\n        return _ref6.apply(this, arguments);\n      };\n    }(),\n    validateOnChange: false,\n    validateOnBlur: false,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 23,\n      columnNumber: 7\n    }\n  }, function (_ref7) {\n    var _React$createElement;\n\n    var isSubmitting = _ref7.isSubmitting;\n    return /*#__PURE__*/React.createElement(Card, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(CardBody, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"m-sm-4\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(Form, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(FormGroup, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(FastField, {\n      label: \"M\\xE3 nh\\xE2n vi\\xEAn\",\n      bsSize: \"sm\",\n      type: \"text\",\n      name: \"staffId\",\n      placeholder: \"\\u0110i\\u1EC1n v\\xE0o m\\xE3 nh\\xE2n vi\\xEAn\",\n      component: ReactstrapInput,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 21\n      }\n    })), /*#__PURE__*/React.createElement(FormGroup, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(FastField, (_React$createElement = {\n      label: true\n    }, _defineProperty(_React$createElement, \"label\", \"H\\u1ECD t\\xEAn nh\\xE2n vi\\xEAn\"), _defineProperty(_React$createElement, \"bsSize\", \"sm\"), _defineProperty(_React$createElement, \"type\", \"text\"), _defineProperty(_React$createElement, \"name\", \"fullName\"), _defineProperty(_React$createElement, \"placeholder\", \"\\u0110i\\u1EC1n v\\xE0o h\\u1ECD t\\xEAn nh\\xE2n vi\\xEAn\"), _defineProperty(_React$createElement, \"component\", ReactstrapInput), _defineProperty(_React$createElement, \"__self\", _this), _defineProperty(_React$createElement, \"__source\", {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 21\n    }), _React$createElement))), /*#__PURE__*/React.createElement(FormGroup, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(FastField, {\n      label: \"S\\u1ED1 \\u0111i\\u1EC7n tho\\u1EA1i\",\n      bsSize: \"sm\",\n      type: \"text\",\n      name: \"phone\",\n      placeholder: \"\\u0110i\\u1EC1n v\\xE0o s\\u1ED1 \\u0111i\\u1EC7n tho\\u1EA1i c\\u1EE7a nh\\xE2n vi\\xEAn\",\n      component: ReactstrapInput,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 154,\n        columnNumber: 21\n      }\n    })), /*#__PURE__*/React.createElement(FormGroup, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(FastField, {\n      bsSize: \"sm\",\n      type: \"text\",\n      label: \"Email\",\n      name: \"email\",\n      placeholder: \"\\u0110i\\u1EC1n v\\xE0o email c\\u1EE7a nh\\xE2n vi\\xEAn\",\n      component: ReactstrapInput,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 21\n      }\n    })), /*#__PURE__*/React.createElement(FormGroup, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(FastField, {\n      bsSize: \"sm\",\n      type: \"text\",\n      label: \"Ph\\xF2ng ban\",\n      name: \"departmentId\",\n      placeholder: \"\\u0110i\\u1EC1n v\\xE0o Id c\\u1EE7a ph\\xF2ng ban\",\n      component: ReactstrapInput,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174,\n        columnNumber: 21\n      }\n    })), /*#__PURE__*/React.createElement(FormGroup, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 183,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(FastField, {\n      bsSize: \"sm\",\n      type: \"text\",\n      label: \"C\\u1EA5p b\\u1EADc\",\n      name: \"role\",\n      placeholder: \"Admin/Manager/Employee\",\n      component: ReactstrapInput,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 184,\n        columnNumber: 21\n      }\n    })), /*#__PURE__*/React.createElement(ErrorMessage, {\n      name: \"errorForm\",\n      component: \"div\",\n      className: \"invalid-feedback\",\n      style: {\n        display: \"block\"\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 194,\n        columnNumber: 19\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        float: \"right\"\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 201,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      type: \"submit\",\n      color: \"primary\",\n      size: \"sm\",\n      disabled: isSubmitting,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 202,\n        columnNumber: 21\n      }\n    }, \"Th\\xEAm nh\\xE2n vi\\xEAn\"), \" \", /*#__PURE__*/React.createElement(Button, {\n      color: \"primary\",\n      size: \"sm\",\n      onClick: props.closeModal,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 210,\n        columnNumber: 21\n      }\n    }, \"\\u0110\\xF3ng\"))))));\n  }));\n};\n\nexport default CreateStaffForm;","map":{"version":3,"sources":["E:/Đồ án web/Project Web Đồ Án bản cuối/codeguidi/codeguidi/Frontend/src/pages/staffManager/createdStaffForm.js"],"names":["React","Button","Card","CardBody","FormGroup","Formik","FastField","Form","ErrorMessage","Yup","ReactstrapInput","toastr","StaffApi","DepartmentApi","CreateStaffForm","props","showSuccessNotification","title","message","options","timeOut","showCloseButton","progressBar","position","success","staffId","fullName","phone","email","departmentId","role","object","string","max","required","test","findStaffByStaffId","isExists","findStaffByStaffPhone","findStaffByEmail","existsByDepartmentId","match","values","setFieldError","create","window","location","reload","console","log","isSubmitting","display","float","closeModal"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport { Button, Card, CardBody, FormGroup } from \"reactstrap\";\r\nimport { Formik, FastField, Form, ErrorMessage } from \"formik\";\r\nimport * as Yup from \"yup\";\r\nimport { ReactstrapInput } from \"reactstrap-formik\";\r\nimport { toastr } from \"react-redux-toastr\";\r\nimport StaffApi from \"../../api/StaffApi\";\r\nimport DepartmentApi from \"../../api/DepartmentApi\";\r\n\r\nconst CreateStaffForm = (props) => {\r\n  const showSuccessNotification = (title, message) => {\r\n    const options = {\r\n      timeOut: 2500,\r\n      showCloseButton: false,\r\n      progressBar: false,\r\n      position: \"top-right\",\r\n    };\r\n    // show notification\r\n    toastr.success(title, message, options);\r\n  };\r\n  return (\r\n    <>\r\n      <Formik\r\n        initialValues={{\r\n          staffId: \"\",\r\n          fullName: \"\",\r\n          phone: \"\",\r\n          email: \"\",\r\n          departmentId: \"\",\r\n          role: \"\",\r\n        }}\r\n        validationSchema={Yup.object({\r\n          staffId: Yup.string()\r\n            .max(10, \"Tối đa 10 ký tự\")\r\n            .required(\"Required\")\r\n            .test(\r\n              \"checkUniquestaffId\",\r\n              \"Mã nhân viên này đã tồn tại\",\r\n              async (staffId) => {\r\n                const isExists = await StaffApi.findStaffByStaffId(staffId);\r\n                return !isExists;\r\n              }\r\n            ),\r\n\r\n          fullName: Yup.string()\r\n            .max(50, \"Tối đa 50 ký tự\")\r\n            .required(\"Required\"),\r\n          phone: Yup.string()\r\n            .max(11, \"Số điện thoại từ 10 đến 11 chữ số \")\r\n            .max(10, \"Số điện thoại từ 10 đến 11 chữ số\")\r\n            .required(\"Required\")\r\n            .test(\r\n              \"checkUniquePhone\",\r\n              \"Số điện thoại này đã tồn tại\",\r\n              async (phone) => {\r\n                const isExists = await StaffApi.findStaffByStaffPhone(phone);\r\n                return !isExists;\r\n              }\r\n            ),\r\n          email: Yup.string()\r\n            .max(100, \"Tối đa 100 ký tự\")\r\n            .required(\"Required\")\r\n            .test(\r\n              \"checkUniquePhone\",\r\n              \"Email này đã được sử dụng\",\r\n              async (email) => {\r\n                const isExists = await StaffApi.findStaffByEmail(email);\r\n                return !isExists;\r\n              }\r\n            ),\r\n          departmentId: Yup.string()\r\n            .max(10, \"Tối đa 10 ký tự\")\r\n            .required(\"Required\")\r\n            .test(\r\n              \"checkUniquePhone\",\r\n              \"Hiện không tồn tại phòng ban này\",\r\n              async (departmentId) => {\r\n                const isExists = await DepartmentApi.existsByDepartmentId(\r\n                  departmentId\r\n                );\r\n                return isExists;\r\n              }\r\n            ),\r\n          role: Yup.string()\r\n            .max(10, \"Tối đa 10 ký tự\")\r\n            .required(\"Required\")\r\n            .test(\r\n              \"checkformequipmentStatus\",\r\n              \"Chỉ chấp nhận các trường: Admin hoặc Employee hoặc Manager \",\r\n              (role) => {\r\n                if (\r\n                  role.match(\"Admin\") ||\r\n                  role.match(\"Employee\") ||\r\n                  role.match(\"Manager\")\r\n                ) {\r\n                  return true;\r\n                }\r\n                return false;\r\n              }\r\n            ),\r\n        })}\r\n        onSubmit={async (values, { setFieldError }) => {\r\n          try {\r\n            // call api\r\n\r\n            await StaffApi.create(\r\n              values.staffId,\r\n              values.fullName,\r\n              values.phone,\r\n              values.email,\r\n              values.departmentId,\r\n              values.role\r\n            );\r\n            showSuccessNotification(\"Tạo mới nhân viên\", \">>> Thành công\");\r\n            window.location.reload();\r\n          } catch (error) {\r\n            setFieldError(\r\n              \"errorForm\",\r\n              \"Lỗi hệ thống, xin lỗi về sự bất tiện này\"\r\n            );\r\n            console.log(error);\r\n          }\r\n        }}\r\n        validateOnChange={false}\r\n        validateOnBlur={false}\r\n      >\r\n        {({ isSubmitting }) => (\r\n          <Card>\r\n            <CardBody>\r\n              <div className=\"m-sm-4\">\r\n                <Form>\r\n                  <FormGroup>\r\n                    <FastField\r\n                      label=\"Mã nhân viên\"\r\n                      bsSize=\"sm\"\r\n                      type=\"text\"\r\n                      name=\"staffId\"\r\n                      placeholder=\"Điền vào mã nhân viên\"\r\n                      component={ReactstrapInput}\r\n                    />\r\n                  </FormGroup>\r\n                  <FormGroup>\r\n                    <FastField\r\n                      label\r\n                      label=\"Họ tên nhân viên\"\r\n                      bsSize=\"sm\"\r\n                      type=\"text\"\r\n                      name=\"fullName\"\r\n                      placeholder=\"Điền vào họ tên nhân viên\"\r\n                      component={ReactstrapInput}\r\n                    />\r\n                  </FormGroup>\r\n                  <FormGroup>\r\n                    <FastField\r\n                      label=\"Số điện thoại\"\r\n                      bsSize=\"sm\"\r\n                      type=\"text\"\r\n                      name=\"phone\"\r\n                      placeholder=\"Điền vào số điện thoại của nhân viên\"\r\n                      component={ReactstrapInput}\r\n                    />\r\n                  </FormGroup>\r\n                  <FormGroup>\r\n                    <FastField\r\n                      bsSize=\"sm\"\r\n                      type=\"text\"\r\n                      label=\"Email\"\r\n                      name=\"email\"\r\n                      placeholder=\"Điền vào email của nhân viên\"\r\n                      component={ReactstrapInput}\r\n                    />\r\n                  </FormGroup>\r\n                  <FormGroup>\r\n                    <FastField\r\n                      bsSize=\"sm\"\r\n                      type=\"text\"\r\n                      label=\"Phòng ban\"\r\n                      name=\"departmentId\"\r\n                      placeholder=\"Điền vào Id của phòng ban\"\r\n                      component={ReactstrapInput}\r\n                    />\r\n                  </FormGroup>\r\n                  <FormGroup>\r\n                    <FastField\r\n                      bsSize=\"sm\"\r\n                      type=\"text\"\r\n                      label=\"Cấp bậc\"\r\n                      name=\"role\"\r\n                      placeholder=\"Admin/Manager/Employee\"\r\n                      component={ReactstrapInput}\r\n                    />\r\n                  </FormGroup>\r\n\r\n                  <ErrorMessage\r\n                    name=\"errorForm\"\r\n                    component={\"div\"}\r\n                    className=\"invalid-feedback\"\r\n                    style={{ display: \"block\" }}\r\n                  />\r\n\r\n                  <div style={{ float: \"right\" }}>\r\n                    <Button\r\n                      type=\"submit\"\r\n                      color=\"primary\"\r\n                      size=\"sm\"\r\n                      disabled={isSubmitting}\r\n                    >\r\n                      Thêm nhân viên\r\n                    </Button>{\" \"}\r\n                    <Button\r\n                      color=\"primary\"\r\n                      size=\"sm\"\r\n                      onClick={props.closeModal}\r\n                    >\r\n                      Đóng\r\n                    </Button>\r\n                  </div>\r\n                </Form>\r\n              </div>\r\n            </CardBody>\r\n          </Card>\r\n        )}\r\n      </Formik>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default CreateStaffForm;\r\n"]},"metadata":{},"sourceType":"module"}